# üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–º–æ-–¥–æ—Å—Ç—É–ø–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –î–≤–æ–π–Ω–æ–π —Å–∏–º–≤–æ–ª `@` –≤ channelId (`@@channelname`)ÂØºËá¥ Telegram API –æ—à–∏–±–∫–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** –í —Ñ—É–Ω–∫—Ü–∏—è—Ö –¥–µ–º–æ-–¥–æ—Å—Ç—É–ø–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `@${channelId}`, –Ω–æ `channelId` –≤ –ë–î —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª —Å–∏–º–≤–æ–ª `@`.

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **`app/api/demo/route.ts`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ channelId –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º invite link
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ channelId —Å @ –∏ –±–µ–∑ @

2. **`app/api/cron/check-demo-access/route.ts`**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω channelId –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è invite link
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω channelId –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. **–î–æ–±–∞–≤–ª–µ–Ω debug —ç–Ω–¥–ø–æ–∏–Ω—Ç** `/api/debug-demo-message`

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
GET https://tma-subscription.vercel.app/api/debug-demo-message
```
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
- Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- channelId –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- –°–æ–∑–¥–∞–Ω–∏–µ invite link —Ä–∞–±–æ—Ç–∞–µ—Ç

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–º–æ-–¥–æ—Å—Ç—É–ø–∞ –≤ Mini App
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Mini App"
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç —Å –¥–µ–º–æ-–¥–æ—Å—Ç—É–ø–æ–º
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–µ–º–æ X –¥–Ω–µ–π"
5. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
   - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ –≤ Telegram —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–∞–Ω–∞–ª
   - ‚úÖ –ö–Ω–æ–ø–∫–∏ "üöÄ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª" –∏ "üì± –û—Ç–∫—Ä—ã—Ç—å Mini App"

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel:
```bash
vercel logs --limit 50
```

## üîç –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö

**–£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ:**
```
‚úÖ Demo access created successfully
üîç Using channel ID for invite link: @channel_name
üîç Create invite link response: {"ok": true, "result": {...}}
‚úÖ Sent demo access message to user 123456789
```

**–û—à–∏–±–∫–∏ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
‚ùå Error creating invite link: {"ok": false, "description": "Bad Request: chat not found"}
```

## üö® –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å BOT_TOKEN:**
   ```bash
   curl "https://api.telegram.org/botYOUR_BOT_TOKEN/getMe"
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–µ:**
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
   - –î–∞—Ç—å –ø—Ä–∞–≤–∞: "Invite users via link", "Ban users"

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:**
   - `BOT_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - `APP_URL` –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

4. **–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:**
   ```bash
   curl -X POST https://tma-subscription.vercel.app/api/demo \
     -H "Content-Type: application/json" \
     -H "x-telegram-init-data: YOUR_INIT_DATA" \
     -d '{"productId": "YOUR_PRODUCT_ID"}'
   ```

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞
2. –ï—Å—Ç—å –ª–∏ —É –±–æ—Ç–∞ –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
3. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Telegram WebApp initData

## üéØ Success Criteria

‚úÖ **–î–µ–º–æ-–¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–µ–º–æ" ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–∞–Ω–∞–ª
- –°—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤–µ–¥–µ—Ç –∫ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—é –≤ –∫–∞–Ω–∞–ª
- –ö–Ω–æ–ø–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç –±–æ—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã

‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –µ—Å–ª–∏:**
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–µ–º–æ
- Invite link —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª—É