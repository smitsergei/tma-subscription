# üöÄ NOWPayments Integration Guide

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–ú—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–º–µ–Ω–∏–ª–∏ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É TON/USDT –Ω–∞ **NOWPayments API** –≤ –≤–∞—à–µ–º Telegram Mini App.

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (.env.local)
```env
NOWPAYMENTS_API_KEY=J2604BW-QHC4R79-H728MFB-8GAGRG5
NOWPAYMENTS_PUBLIC_KEY=f9d501e0-d89e-45b9-943f-4398d3684ffe
NOWPAYMENTS_IPN_SECRET=nowpayments_ipn_secret_12345
```

### Vercel
–î–æ–±–∞–≤—å—Ç–µ —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ **Vercel Dashboard** ‚Üí **Settings** ‚Üí **Environment Variables**.

## üìã –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `components/NOWPaymentsButton.tsx` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- `hooks/useNOWPayments.ts` - Hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å NOWPayments
- `app/api/payment/nowpayments-webhook/route.ts` - Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `app/app/page.tsx` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `components/ProductList.tsx` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `app/api/payment/initiate/route.ts` - API –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- `types/index.ts` - –¢–∏–ø—ã –¥–ª—è NOWPayments
- `lib/utils.ts` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ IPN
- `.env.example` –∏ `.env.local` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Vercel

1. **–ó–∞–ª–µ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git:**
   ```bash
   git add .
   git commit -m "Refactor: Replace TON Connect with NOWPayments"
   git push origin main
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel
   - Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ NOWPayments –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ–ø–ª–æ–π:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ NOWPayments:**
   - –í –ø–∞–Ω–µ–ª–∏ NOWPayments —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ IPN callback URL:
     `https://your-app.vercel.app/api/payment/nowpayments-webhook`

## üí≥ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç** ‚Üí –ü–æ—è–≤–ª—è–µ—Ç—Å—è NOWPaymentsButton
2. **–í—ã–±–æ—Ä –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å BTC, ETH, USDT –∏ –¥—Ä.
3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** ‚Üí API —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –≤ NOWPayments
4. **–†–µ–¥–∏—Ä–µ–∫—Ç** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
5. **–í–µ–±—Ö—É–∫** ‚Üí NOWPayments —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–∞
6. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è** ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:3010`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤

### –ù–∞ Vercel:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ NOWPayments

‚úÖ **–ë–æ–ª—å—à–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç** - BTC, ETH, USDT, USDC, LTC, BCH
‚úÖ **–ü—Ä–æ—Å—Ç–æ–π UX** - –ù–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–æ—à–µ–ª—å–∫–∏
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –í–µ–±—Ö—É–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Functions
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ NOWPayments

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É NOWPayments.