# ๐ ะะปะฐะฝ ะฒะฝะตะดัะตะฝะธั ัะธััะตะผั ัะบะธะดะพะบ, ะฟัะพะผะพะบะพะดะพะฒ ะธ ะดะตะผะพ-ัะตะถะธะผะฐ

## ๐ฏ **ะะฑะทะพั ััะฝะบัะธะพะฝะฐะปะฐ**

### 1. ะกะธััะตะผะฐ ัะบะธะดะพะบ
- **ะัะพัะตะฝัะฝัะต ัะบะธะดะบะธ**: 10%, 20%, 50% ะธ ั.ะด.
- **ะคะธะบัะธัะพะฒะฐะฝะฝัะต ัะบะธะดะบะธ**: $5, $10, $20
- **ะัะตะผะตะฝะฝัะต ะฐะบัะธะธ**: ั ะดะฐัะพะน ะฝะฐัะฐะปะฐ/ะบะพะฝัะฐ
- **ะัะพะดัะบัะพะฒัะต ัะบะธะดะบะธ**: ะฝะฐ ะบะพะฝะบัะตัะฝัะต ะฟัะพะดัะบัั

### 2. ะัะพะผะพะบะพะดั
- **ะะปะพะฑะฐะปัะฝัะต**: ะฝะฐ ะฒัะต ะฟัะพะดัะบัั
- **ะัะพะดัะบัะพะฒัะต**: ะฝะฐ ะบะพะฝะบัะตัะฝัะน ะฟัะพะดัะบั
- **ะะณัะฐะฝะธัะตะฝะธั**: ะฟะพ ะฒัะตะผะตะฝะธ ะธ ะบะพะปะธัะตััะฒั ะธัะฟะพะปัะทะพะฒะฐะฝะธะน
- **ะฃัะปะพะฒะธั**: ะผะธะฝะธะผะฐะปัะฝะฐั ััะผะผะฐ ะทะฐะบะฐะทะฐ

### 3. ะะตะผะพ-ัะตะถะธะผ
- **ะะตัะฟะปะฐัะฝัะน ะฟะตัะธะพะด**: 7-14 ะดะฝะตะน ัะตััะธัะพะฒะฐะฝะธั
- **ะะณัะฐะฝะธัะตะฝะธั**: ะฑะฐะทะพะฒัะน ััะฝะบัะธะพะฝะฐะป
- **ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธะต** ะฒ ะฟะปะฐัะฝัั ะฟะพะดะฟะธัะบั

---

## ๐๏ธ **ะญัะฐะฟ 1: ะะฑะฝะพะฒะปะตะฝะธะต ััะตะผั ะฑะฐะทั ะดะฐะฝะฝัั**

### โ ะัะฟะพะปะฝะตะฝะพ:
- ะะพะฑะฐะฒะปะตะฝั enums: `DiscountType`, `PromoType`
- ะะฑะฝะพะฒะปะตะฝะฐ ะผะพะดะตะปั `Product`: ะฟะพะปั `allowDemo`, `demoDays`
- ะะฑะฝะพะฒะปะตะฝะฐ ะผะพะดะตะปั `User`: ัะฒัะทะธ ั ะฝะพะฒัะผะธ ะผะพะดะตะปัะผะธ
- ะะพะฑะฐะฒะปะตะฝั ะฝะพะฒัะต ะผะพะดะตะปะธ: `Discount`, `PromoCode`, `DemoAccess`, `DiscountUsage`, `PromoUsage`

### ๐ ะกะปะตะดัััะธะน ัะฐะณ:
```bash
# ะกะณะตะฝะตัะธัะพะฒะฐัั ะผะธะณัะฐัะธั
npx prisma db push
npx prisma generate
```

---

## ๐ง **ะญัะฐะฟ 2: API Endpoints**

### ะฃะฟัะฐะฒะปะตะฝะธะต ัะบะธะดะบะฐะผะธ (`/api/admin/discounts/`)
```
GET    /api/admin/discounts          - ะะพะปััะธัั ะฒัะต ัะบะธะดะบะธ
GET    /api/admin/discounts/:id      - ะะพะปััะธัั ัะบะธะดะบั
POST   /api/admin/discounts          - ะกะพะทะดะฐัั ัะบะธะดะบั
PUT    /api/admin/discounts/:id      - ะะฑะฝะพะฒะธัั ัะบะธะดะบั
DELETE /api/admin/discounts/:id      - ะฃะดะฐะปะธัั ัะบะธะดะบั
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะพะผะพะบะพะดะฐะผะธ (`/api/admin/promocodes/`)
```
GET    /api/admin/promocodes          - ะะพะปััะธัั ะฒัะต ะฟัะพะผะพะบะพะดั
GET    /api/admin/promocodes/:id      - ะะพะปััะธัั ะฟัะพะผะพะบะพะด
POST   /api/admin/promocodes          - ะกะพะทะดะฐัั ะฟัะพะผะพะบะพะด
PUT    /api/admin/promocodes/:id      - ะะฑะฝะพะฒะธัั ะฟัะพะผะพะบะพะด
DELETE /api/admin/promocodes/:id      - ะฃะดะฐะปะธัั ะฟัะพะผะพะบะพะด
POST   /api/admin/promocodes/validate - ะะฐะปะธะดะธัะพะฒะฐัั ะฟัะพะผะพะบะพะด
```

### ะะตะผะพ-ะดะพัััะฟ (`/api/admin/demo/`)
```
GET    /api/admin/demo/access         - ะะพะปััะธัั ะดะตะผะพ-ะดะพัััะฟั
POST   /api/admin/demo/grant          - ะัะดะฐัั ะดะตะผะพ-ะดะพัััะฟ
DELETE /api/admin/demo/revoke/:id     - ะัะพะทะฒะฐัั ะดะตะผะพ-ะดะพัััะฟ
```

### ะะพะปัะทะพะฒะฐัะตะปััะบะธะต API (`/api/user/`)
```
POST   /api/user/promo/apply          - ะัะธะผะตะฝะธัั ะฟัะพะผะพะบะพะด
GET    /api/user/discounts           - ะะพะปััะธัั ะดะพัััะฟะฝัะต ัะบะธะดะบะธ
POST   /api/user/demo/request         - ะะฐะฟัะพัะธัั ะดะตะผะพ-ะดะพัััะฟ
```

---

## ๐จ **ะญัะฐะฟ 3: ะะฑะฝะพะฒะปะตะฝะธะต ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ**

### 3.1 ะะพะผะฟะพะฝะตะฝั ัะฟัะฐะฒะปะตะฝะธั ัะบะธะดะบะฐะผะธ (`components/admin/DiscountManagement.tsx`)
```typescript
interface Discount {
  id: string
  productId: string
  type: 'PERCENTAGE' | 'FIXED_AMOUNT'
  value: number
  isActive: boolean
  startDate: string
  endDate: string
  product: {
    id: string
    name: string
  }
  usageHistory: {
    count: number
    users: number
  }
}
```

### 3.2 ะะพะผะฟะพะฝะตะฝั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะผะพะบะพะดะฐะผะธ (`components/admin/PromoCodeManagement.tsx`)
```typescript
interface PromoCode {
  id: string
  code: string
  type: 'PERCENTAGE' | 'FIXED_AMOUNT' | 'FREE_TRIAL'
  discountValue: number
  productId?: string
  maxUses?: number
  currentUses: number
  minAmount?: number
  isActive: boolean
  validFrom: string
  validUntil: string
  product?: {
    id: string
    name: string
  }
}
```

### 3.3 ะะฑะฝะพะฒะปะตะฝะธะต ProductManagement.tsx
- ะะพะฑะฐะฒะธัั ะบะฝะพะฟะบะธ ัะฟัะฐะฒะปะตะฝะธั ัะบะธะดะบะฐะผะธ
- ะะพะบะฐะทะฐัั ัะตะบััะธะต ัะบะธะดะบะธ ะฝะฐ ะฟัะพะดัะบัะต
- ะะฐัััะพะนะบะธ ะดะตะผะพ-ัะตะถะธะผะฐ

---

## ๐ฏ **ะญัะฐะฟ 4: ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั**

### 4.1 ะะฑะฝะพะฒะปะตะฝะธะต Mini App
- ะะพะปะต ะดะปั ะฒะฒะพะดะฐ ะฟัะพะผะพะบะพะดะฐ ะฟัะธ ะพะฟะปะฐัะต
- ะัะพะฑัะฐะถะตะฝะธะต ะดะพัััะฟะฝัั ัะบะธะดะพะบ
- ะะฝะพะฟะบะฐ "ะะพะฟัะพะฑะพะฒะฐัั ะฑะตัะฟะปะฐัะฝะพ" ะดะปั ะดะตะผะพ-ัะตะถะธะผะฐ

### 4.2 ะัะพัะตัั ะพะฟะปะฐัั
1. ะัะฑะพั ะฟัะพะดัะบัะฐ
2. ะัะธะผะตะฝะตะฝะธะต ะฟัะพะผะพะบะพะดะฐ (ะตัะปะธ ะตััั)
3. ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐััะตั ัะบะธะดะพะบ
4. ะัะฑะพั: ะดะตะผะพ-ัะตะถะธะผ ะธะปะธ ะพะฟะปะฐัะฐ

---

## ๐ฐ **ะญัะฐะฟ 5: ะะธะทะฝะตั-ะปะพะณะธะบะฐ ัะบะธะดะพะบ**

### 5.1 ะะปะณะพัะธัะผ ัะฐััะตัะฐ ัะตะฝั
```typescript
function calculateFinalPrice(
  basePrice: number,
  discount?: Discount,
  promoCode?: PromoCode
): {
  finalPrice: number
  appliedDiscounts: string[]
  savings: number
} {
  let finalPrice = basePrice;
  const appliedDiscounts: string[] = [];

  // ะัะธะผะตะฝัะตะผ ะฟัะพะดัะบัะพะฒัั ัะบะธะดะบั
  if (discount && discount.isActive && isDiscountValid(discount)) {
    finalPrice = applyDiscount(finalPrice, discount);
    appliedDiscounts.push(`ะกะบะธะดะบะฐ ${discount.value}%`);
  }

  // ะัะธะผะตะฝัะตะผ ะฟัะพะผะพะบะพะด
  if (promoCode && isPromoCodeValid(promoCode)) {
    finalPrice = applyPromoCode(finalPrice, promoCode);
    appliedDiscounts.push(`ะัะพะผะพะบะพะด: ${promoCode.code}`);
  }

  return {
    finalPrice: Math.max(0, finalPrice),
    appliedDiscounts,
    savings: basePrice - finalPrice
  };
}
```

### 5.2 ะะฐะปะธะดะฐัะธั ะฟัะพะผะพะบะพะดะพะฒ
- ะัะพะฒะตัะบะฐ ััะพะบะฐ ะดะตะนััะฒะธั
- ะัะพะฒะตัะบะฐ ะบะพะปะธัะตััะฒะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธะน
- ะัะพะฒะตัะบะฐ ะผะธะฝะธะผะฐะปัะฝะพะน ััะผะผั
- ะัะพะฒะตัะบะฐ ะฟัะธะผะตะฝะธะผะพััะธ ะบ ะฟัะพะดัะบัั

---

## ๐ **ะญัะฐะฟ 6: ะะตะผะพ-ัะตะถะธะผ**

### 6.1 ะัะพัะตัั ะฒัะดะฐัะธ ะดะตะผะพ-ะดะพัััะฟะฐ
1. ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟัะฐัะธะฒะฐะตั ะดะตะผะพ
2. ะัะพะฒะตัะบะฐ: ะฝะต ะฑัะปะพ ะปะธ ะดะตะผะพ ัะฐะฝะตะต
3. ะกะพะทะดะฐะฝะธะต ะทะฐะฟะธัะธ ะฒ `DemoAccess`
4. ะะฒัะพะผะฐัะธัะตัะบะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะฒ ะบะฐะฝะฐะป ะฝะฐ demoDays

### 6.2 ะฃะฟัะฐะฒะปะตะฝะธะต ะดะตะผะพ-ะดะพัััะฟะพะผ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะธััะตัะตะฝะธั ััะพะบะฐ
- ะฃะฒะตะดะพะผะปะตะฝะธั ะทะฐ 1 ะดะตะฝั ะดะพ ะพะบะพะฝัะฐะฝะธั
- ะัะตะดะปะพะถะตะฝะธะต ะฟะตัะตะนัะธ ะฝะฐ ะฟะปะฐัะฝัั ะฟะพะดะฟะธัะบั

---

## ๐ **ะญัะฐะฟ 7: ะะฝะฐะปะธัะธะบะฐ ะธ ะพััะตัั**

### 7.1 ะะตััะธะบะธ ะดะปั ะฐะดะผะธะฝะฐ
- ะญััะตะบัะธะฒะฝะพััั ะฟัะพะผะพะบะพะดะพะฒ (ะบะพะฝะฒะตััะธั)
- ะกะฐะผัะต ะฟะพะฟัะปััะฝัะต ัะบะธะดะบะธ
- ะะตะผะพ-ะบะพะฝะฒะตััะธะธ
- ะััััะบะฐ ั ััะตัะพะผ ัะบะธะดะพะบ

### 7.2 ะะพะปัะทะพะฒะฐัะตะปััะบะฐั ััะฐัะธััะธะบะฐ
- ะัะฟะพะปัะทะพะฒะฐะฝะฝัะต ะฟัะพะผะพะบะพะดั
- ะััะพัะธั ะดะตะผะพ-ะดะพัััะฟะพะฒ
- ะญะบะพะฝะพะผะธั ะพั ัะบะธะดะพะบ

---

## ๐งช **ะญัะฐะฟ 8: ะขะตััะธัะพะฒะฐะฝะธะต**

### 8.1 Unit ัะตััั
- ะะฐััะตั ัะบะธะดะพะบ
- ะะฐะปะธะดะฐัะธั ะฟัะพะผะพะบะพะดะพะฒ
- ะกะพะทะดะฐะฝะธะต ะดะตะผะพ-ะดะพัััะฟะฐ

### 8.2 ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั
- ะัะพัะตัั ะพะฟะปะฐัั ั ะฟัะพะผะพะบะพะดะพะผ
- ะกะพะทะดะฐะฝะธะต ะธ ะฟัะธะผะตะฝะตะฝะธะต ัะบะธะดะพะบ
- ะะธะทะฝะตะฝะฝัะน ัะธะบะป ะดะตะผะพ-ะดะพัััะฟะฐ

### 8.3 UI ัะตััั
- ะคะพัะผั ัะพะทะดะฐะฝะธั ัะบะธะดะพะบ/ะฟัะพะผะพะบะพะดะพะฒ
- ะัะธะผะตะฝะตะฝะธะต ะฟัะพะผะพะบะพะดะฐ ะฒ ะธะฝัะตััะตะนัะต
- ะะตะผะพ-ะฟัะพัะตัั

---

## ๐ **KPI ััะฟะตัะฐ**

### ะัะฐัะบะพััะพัะฝัะต (1-2 ะฝะตะดะตะปะธ)
- โ ะกะพะทะดะฐะฝั API endpoints
- โ ะะฑะฝะพะฒะปะตะฝะฐ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั
- โ ะะฐะทะพะฒัะน ััะฝะบัะธะพะฝะฐะป ัะบะธะดะพะบ ัะฐะฑะพัะฐะตั

### ะกัะตะดะฝะตััะพัะฝัะต (1 ะผะตััั)
- ๐ฏ ะัะพะผะพะบะพะดั ะฐะบัะธะฒะฝะพ ะธัะฟะพะปัะทััััั
- ๐ฏ ะะตะผะพ-ัะตะถะธะผ ะบะพะฝะฒะตััะธััะตั ะฒ ะฟัะพะดะฐะถะธ >20%
- ๐ฏ ะกัะตะดะฝะธะน ัะตะบ ัะฒะตะปะธัะตะฝ ะทะฐ ััะตั ัะบะธะดะพะบ

### ะะพะปะณะพััะพัะฝัะต (3 ะผะตัััะฐ)
- ๐ ะกะธััะตะผะฐ ะปะพัะปัะฝะพััะธ ะฝะฐ ะพัะฝะพะฒะต ัะบะธะดะพะบ
- ๐ ะะตััะพะฝะฐะปัะฝัะต ะฟัะตะดะปะพะถะตะฝะธั
- ๐ ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝัะต ะผะฐัะบะตัะธะฝะณะพะฒัะต ะฐะบัะธะธ

---

## ๐จ **ะะธัะบะธ ะธ ะผะธัะธะณะฐัะธั**

| ะะธัะบ | ะะตัะพััะฝะพััั | ะะปะธัะฝะธะต | ะะธัะธะณะฐัะธั |
|------|------------|---------|-----------|
| ะัะธะฑะบะธ ะฒ ัะฐััะตัะต ัะบะธะดะพะบ | ะกัะตะดะฝัั | ะััะพะบะพะต | ะขะตััะธัะพะฒะฐะฝะธะต, ะฒะฐะปะธะดะฐัะธั |
| ะะพัะตะฝะฝะธัะตััะฒะพ ั ะฟัะพะผะพะบะพะดะฐะผะธ | ะกัะตะดะฝัั | ะกัะตะดะฝะตะต | ะะธะผะธัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั, ะปะพะณะธัะพะฒะฐะฝะธะต |
| ะะธะทะบะฐั ะบะพะฝะฒะตััะธั ะดะตะผะพ | ะััะพะบะฐั | ะกัะตะดะฝะตะต | ะะฝะฐะปะธัะธะบะฐ, ะพะฟัะธะผะธะทะฐัะธั ะฟัะพัะตััะฐ |
| ะกะปะพะถะฝะพััั ะผะธะณัะฐัะธะธ ะะ | ะะธะทะบะฐั | ะััะพะบะพะต | ะัะบะฐะฟ, ะฟะพััะฐะฟะฝะฐั ะผะธะณัะฐัะธั |

---

## ๐ **ะะปะฐะฝ ะฒะฝะตะดัะตะฝะธั (ััะพะบะธ)**

**ะะตะดะตะปั 1:**
- โ ะะฑะฝะพะฒะธัั ััะตะผั ะะ
- ๐ง ะกะพะทะดะฐัั ะฑะฐะทะพะฒัะต API endpoints
- ๐งช ะขะตััะธัะพะฒะฐะฝะธะต API

**ะะตะดะตะปั 2:**
- ๐จ ะะดะผะธะฝ-ะฟะฐะฝะตะปั: ัะฟัะฐะฒะปะตะฝะธะต ัะบะธะดะบะฐะผะธ
- ๐จ ะะดะผะธะฝ-ะฟะฐะฝะตะปั: ัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะผะพะบะพะดะฐะผะธ
- ๐จ ะะฑะฝะพะฒะธัั ัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะดัะบัะฐะผะธ

**ะะตะดะตะปั 3:**
- ๐ ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั
- ๐ฐ ะะฝัะตะณัะฐัะธั ั ะฟัะพัะตััะพะผ ะพะฟะปะฐัั
- ๐ฏ ะะตะผะพ-ัะตะถะธะผ

**ะะตะดะตะปั 4:**
- ๐ ะะฝะฐะปะธัะธะบะฐ ะธ ะพััะตัั
- ๐งช ะะพะผะฟะปะตะบัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต
- ๐ ะะพะบัะผะตะฝัะฐัะธั ะธ ะดะตะฟะปะพะน