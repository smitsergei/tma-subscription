# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ Mini App

## üö® –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
- –†–∞–∑–¥–µ–ª "–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏" –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í–º–µ—Å—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä
- –ü—Ä–æ–¥—É–∫—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
- –í `app/app/page.tsx` –±—ã–ª–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥—É–∫—Ç–µ
- –ù–µ –±—ã–ª–æ –≤—ã–∑–æ–≤–∞ API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

1. **–ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –í —Ñ–∞–π–ª–µ `app/app/page.tsx` (—Å—Ç—Ä–æ–∫–∏ 110-121) –±—ã–ª —Å—Ç–∞—Ç–∏—á–Ω—ã–π HTML:

```tsx
// –ë—ã–ª–æ (–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
<div className="bg-white rounded-lg p-4 border border-gray-200">
  <h3 className="font-medium text-gray-900">VIP –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ 30 –¥–Ω–µ–π</h3>
  <p className="text-gray-600 text-sm mt-1">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –Ω–∞ 30 –¥–Ω–µ–π</p>
  <div className="flex items-center justify-between mt-3">
    <div>
      <span className="text-lg font-bold text-blue-600">$8.00</span>
      <span className="text-sm text-gray-500 line-through ml-2">$10.00</span>
    </div>
    <button className="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
      üõí –ö—É–ø–∏—Ç—å
    </button>
  </div>
</div>
```

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:** –ù–µ –±—ã–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ API

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å API:** –û—à–∏–±–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ BigInt –≤ `/api/products`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API endpoint (`app/api/products/route.ts`)

**–ü—Ä–æ–±–ª–µ–º–∞:** BigInt serialization –æ—à–∏–±–∫–∏
**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω spread –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ —è–≤–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è:

```typescript
// –ë—ã–ª–æ (–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
data: products.map(product => ({
  ...product, // ‚Üê –ü—Ä–æ–±–ª–µ–º–∞ —Å BigInt
  channelId: product.channelId.toString(),
  // ...
}))

// –°—Ç–∞–ª–æ (–ü—Ä–∞–≤–∏–ª—å–Ω–æ):
data: products.map(product => ({
  productId: product.productId,
  name: product.name,
  description: product.description,
  price: parseFloat(product.price.toString()),
  discountPrice: product.discountPrice ? parseFloat(product.discountPrice.toString()) : null,
  periodDays: product.periodDays,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –±–µ–∑ spread
}))
```

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ Mini App (`app/app/page.tsx`)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- State –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤: `const [products, setProducts] = useState<any[]>([])`
- State –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏: `const [productsLoading, setProductsLoading] = useState(false)`
- –§—É–Ω–∫—Ü–∏—è `loadProducts()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ API
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

```tsx
// –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:
const loadProducts = async () => {
  try {
    setProductsLoading(true)
    const response = await fetch('/api/products')
    const data = await response.json()

    if (data.success) {
      setProducts(data.data)
      console.log(`‚úÖ Loaded ${data.data.length} products`)
    }
  } catch (error) {
    console.error('‚ùå Error loading products:', error)
  } finally {
    setProductsLoading(false)
  }
}
```

### 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- –ó–∞–≥—Ä—É–∑–∫–∞: `productsLoading`
- –ù–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤: `products.length === 0`
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥: `products.map((product) => ...)`

```tsx
{productsLoading ? (
  <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫...</div>
) : products.length === 0 ? (
  <div>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫</div>
) : (
  products.map((product) => (
    <div key={product.productId}>
      <h3>{product.name}</h3>
      <p>{product.description}</p>
      {product.channel && (
        <p>üì¢ {product.channel.name}</p>
      )}
      {/* –¶–µ–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ */}
    </div>
  ))
)}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
curl -X GET "https://tma-subscription.vercel.app/api/products"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "productId": "cmhm4plzn00019zkjiqp809gy",
      "name": "Smit Idea",
      "description": "–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –Ω–∞ 30 –¥–Ω–µ–π",
      "price": 10,
      "discountPrice": 8,
      "periodDays": 30,
      "channel": {
        "channelId": "-1002413806638",
        "name": "VIP –ö–æ–Ω—Ç–µ–Ω—Ç"
      }
    }
  ]
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Mini App:
1. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–∞—Ç—å `/start`
3. –ù–∞–∂–∞—Ç—å "üöÄ –û—Ç–∫—Ä—ã—Ç—å Mini App"
4. –ü–µ—Ä–µ–π—Ç–∏ –≤ "üõçÔ∏è –ü–æ–¥–ø–∏—Å–∫–∏"
5. –£–≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
üì± Mini App:
üõçÔ∏è –ü–æ–¥–ø–∏—Å–∫–∏
‚îú‚îÄ‚îÄ VIP –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ 30 –¥–Ω–µ–π (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ)
‚îú‚îÄ‚îÄ $8.00 $10.00 (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–∞)
‚îî‚îÄ‚îÄ üì¢ –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–Ω–∞–ª–µ
```

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
üì± Mini App:
üõçÔ∏è –ü–æ–¥–ø–∏—Å–∫–∏
‚îú‚îÄ‚îÄ Smit Idea (—Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç –∏–∑ –ë–î)
‚îú‚îÄ‚îÄ $8.00 $10.00 (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–∞)
‚îú‚îÄ‚îÄ üì¢ VIP –ö–æ–Ω—Ç–µ–Ω—Ç (–Ω–∞—Å—Ç–æ—è—â–∏–π –∫–∞–Ω–∞–ª)
‚îú‚îÄ‚îÄ üìÖ /30–¥–Ω–µ–π (—Ä–µ–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫)
‚îî‚îÄ‚îÄ üõí –ö—É–ø–∏—Ç—å (—Ä–∞–±–æ—Ç–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞)
```

---

## üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- **API Products:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã
- **Mini App:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- **–¶–µ–Ω—ã:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã —Å–æ —Å–∫–∏–¥–∫–∞–º–∏
- **–ö–∞–Ω–∞–ª—ã:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–∞—Ö
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- **–û–ø–ª–∞—Ç–∞:** TON Connect –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
- **–ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫

---

## üîß Technical Details

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
1. `app/api/products/route.ts` - Fix BigInt serialization
2. `app/app/page.tsx` - Add dynamic product loading

**–ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:**
- ‚ùå BigInt serialization error ‚Üí ‚úÖ Explicit field mapping
- ‚ùå Hardcoded products ‚Üí ‚úÖ Dynamic API loading
- ‚ùå No loading states ‚Üí ‚úÖ Loading/empty/error states
- ‚ùå No channel info ‚Üí ‚úÖ Channel display with name

---

## üéâ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** –¢–µ–ø–µ—Ä—å Mini App:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–Ω–∞–ª–∞—Ö
- ‚úÖ –ò–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω:** https://tma-subscription.vercel.app ‚úÖ

–¢–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –∏ –æ–Ω–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ Mini App –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!