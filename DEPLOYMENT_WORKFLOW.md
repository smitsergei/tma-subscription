# üöÄ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Deployment Workflow –¥–ª—è TMA-–ü–æ–¥–ø–∏—Å–∫–∞

## üìã **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**

### üîÑ **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**

1. **–î–ª—è –±—ã—Å—Ç—Ä—ã—Ö –ø—Ä–∞–≤–æ–∫:**
   ```bash
   vercel --prod
   ```
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç production –∞–ª–∏–∞—Å
   - –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ deployment'–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - Webhook –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ URL

2. **–î–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   ```bash
   npm run deploy:clean
   ```
   - –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ deployment'–∏
   - –ó–∞—Ç–µ–º –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
   - –û–±–Ω–æ–≤–ª—è–µ—Ç webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üéØ **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**

| –°–∏—Ç—É–∞—Ü–∏—è | –ö–æ–º–∞–Ω–¥–∞ | –ü–æ—á–µ–º—É |
|----------|---------|-------|
| **–ú–µ–ª–∫–∏–µ –±–∞–≥—Ñ–∏–∫—Å—ã** | `vercel --prod` | –ë—ã—Å—Ç—Ä–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é |
| **–ù–æ–≤—ã–µ —Ñ–∏—á–∏** | `npm run deploy:clean` | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | `npm run deploy:preview` | –°–æ–∑–¥–∞–µ—Ç preview deployment –¥–ª—è —Ç–µ—Å—Ç–æ–≤ |
| **–ü—Ä–æ–±–ª–µ–º—ã —Å webhook** | `npm run fix-webhook` | –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç webhook –±–µ–∑ –¥–µ–ø–ª–æ—è |

## üõ†Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:**

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. **–ê–ª–∏–∞—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - `tma-subscription.vercel.app` –≤—Å–µ–≥–¥–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
2. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–µ–ø–ª–æ–µ–≤** - Vercel —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 production
3. **Webhook –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º** - –Ω–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑

### ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Vercel:**
- `autoAssignAlias: true` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–ª–∏–∞—Å
- `regions: ["arn1"]` - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–≥–∏–æ–Ω –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- `.vercelignore` - –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

## üì± **GitHub Actions (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è):**

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
```yaml
name: Deploy
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
          scope: ${{ secrets.VERCEL_ORG }}
```

## üéØ **–õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:**

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `vercel --prod`** –¥–ª—è production –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ preview** –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
3. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –º–Ω–æ–≥–æ deployment'–æ–≤** - —ç—Ç–æ –∑–∞–ø—É—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ URL** –¥–ª—è Telegram –∏ webhook

## üîÑ **–¢–µ–∫—É—â–∏–π workflow:**

```bash
# 1. –í–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
git add .
git commit -m "fix: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞"

# 2. –î–µ–ø–ª–æ–π –≤ production
vercel --prod

# 3. –ì–æ—Ç–æ–≤–æ! tma-subscription.vercel.app –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω
```

**–ü—Ä–æ—Å—Ç–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ!** üöÄ